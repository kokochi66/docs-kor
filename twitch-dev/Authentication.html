<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="css/style.css">
    <title>인증 | Twitch Developers</title>
</head>
<body>
    <div id="wrap">
        <div id="side">     
            <a class="cont"></a>
            <a class="cont" href="overview.html">개요</a>
            <a class="cont active">인증</a>
        </div>
        <div id="main">
            <div class="title">인증</div>
            <a href="https://dev.twitch.tv/docs/authentication" class="origin">원본 사이트</a>
            <div class="sub_title">소개</div>
            <p>이 안내는 트위치 인증을 사용해, 어플리케이션이 트위치 계정을 대신하여 작업을 수행하거나, 특정 데이터에 엑세스 할 수 있도록 하는 방법을 설명합니다.</p>
            <p>우리는 OAuth 인증 방법을 선호하며,  <a href="https://datatracker.ietf.org/doc/html/rfc6749">OAuth 2.0 프로토콜</a>의 일부를 사용합니다.</p>
            <p>OAuth 이외에, 트위치는 안정적인 OAuth 2.0의 흐름을 위해서 <a href="https://openid.net/connect/">OIDC(OpenID Connect)</a>를 지원합니다. OIDC 토큰은 AWS의 Cognito와 같은 OIDC 규정 준수를 위해 구축된 서비스와 호환이 가능합니다.</p>
            <p>인증방법</p>
            <ol>
                <li> <a href="#registration">여러분들의 앱을 생성하세요.</a> 
                    그리고 클라이언트ID(client ID)와 클라이언트 시크릿(client secret)을 얻으세요</li>
                <li> <a href="https://dev.twitch.tv/docs/authentication#getting-tokens">토큰을 얻으세요</a> 
                    이를 위해서는 범위지정(scope)과 어플리케이션에 필요한 권한지정(permission)이 필요합니다.</li>
                <li> <a href="https://dev.twitch.tv/docs/authentication#sending-user-access-and-app-access-tokens">여러분의 API 요청에 토큰을 보내세요.</a> 
                    이를 통해서 API 요청의 인증이 완료됩니다.</li>
            </ol>
            <p>GO와 Node.js의 샘플 코드가 존재합니다.</p>
            <p><strong>경고 : </strong>여러분들의 토큰을 비밀번호와 같이 다뤄야합니다. 여러분들의 토큰을 공용 URL로 사용해서는 안되며, 웹페이지에 공개해서도 안됩니다.</p>
            

            <div class="sub_title" id="Validating">요청에 대한 유효성 검사(Validating)</div>
            <p>여러분들이 트위치 인증을 오직 로그인 목적으로만 사용하고 싶다면, 엑세스 토큰(access token)은 반복적으로 유효성을 검사해야합니다. 어플리케이션을 승인한 사용자가 연결을 해제하였는지를 확인하기 위해서, 발급된 OAuth 토큰의 주기적인 유효성 검사가 필요합니다.</p>
            <p>유효성 검사가 한 시간 이상이 지난 경우에, 민감한 정보에 대한 수정이나, 접근을 하는 API 요청을 보낸다면, 요청이 보내지기 전에 엑세스 토큰의 유효성을 검사해야합니다.</p>
            <p>트위치는 이에 대해 주기적인 감시를 실시합니다. 예를 들어, 로그인에 대해서만 유효성 검증을 실시하고, 이후에는 유효성 검증을 하지 않는 어플리케이션을 발견하면 개발자에게 확인하여 문제를 해결합니다. 만약 문제가 해결되지 않으면, 우리는 개발자의 API키를 취소하거나, 어플리케이션의 성능을 제한하는 등의 처벌을 내릴 수도 있습니다.</p>
            <p>OAuth 엑세스 토큰은 최종 사용자의 요구에 따라 다양한 동작을 하며, 이에 따라 유효성 검사가 중요해집니다. 예를들어, 사용자가 트위치 계정과 당신의 어플리케이션의 통합 연결을 해제하려고 하면, 트위치 계정 설정에서 이를 수행할 수 있습니다. 사용자가 통합 연결을 끊는다면, 해당 연결 간의 모든 OAuth 토큰이 무효화 될 것입니다. 이러한 상황에서, 끊어진 OAuth 토큰은 다른 제 3의 서비스로 연결 될 것입니다. 그러므로 연결이 끊어진 사용자가 서비스 간의 세션 역시 무효화 되어야합니다.</p>
            <p>요청에 대한 유효성 검사를 하고 싶다면, 여러분의 OAuth 토큰을 헤더에 담아서 유효성 검사 엔드포인트(https://id.twitch.tv/oauth2/validate)로 제출해야 합니다. 인증이 되었다면, 응답 요청은 여러분의 토큰의 상태(status)가 포함됩니다. 응답이 성공적으로 갔다면, 발급된 엑세스 토큰이 유효함을 의미합니다.</p>
            <p>다음은 요청에 대한 예제 코드입니다.</p>
            <div class="colorscripter-code" style="color:#010101;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; position:relative !important;overflow:auto"><table class="colorscripter-code-table" style="margin:0;padding:0;border:none;background-color:#fafafa;border-radius:4px;" cellspacing="0" cellpadding="0"><tr><td style="padding:6px;border-right:2px solid #e5e5e5"><div style="margin:0;padding:0;word-break:normal;text-align:right;color:#666;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important;line-height:130%"><div style="line-height:130%">1</div></div></td><td style="padding:6px 0;text-align:left"><div style="margin:0;padding:0;color:#010101;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important;line-height:130%"><div style="padding:0 6px; white-space:pre; line-height:130%">curl&nbsp;-H&nbsp;"Authorization:&nbsp;OAuth&nbsp;&lt;access&nbsp;token&gt;"&nbsp;https://id.twitch.tv/oauth2/validate</div></div></td><td style="vertical-align:bottom;padding:0 2px 4px 0"><a href="http://colorscripter.com/info#e" target="_blank" style="text-decoration:none;color:white"><span style="font-size:9px;word-break:normal;background-color:#e5e5e5;color:white;border-radius:10px;padding:1px">cs</span></a></td></tr></table></div>
            <p>그리고, 다음은 응답에 대한 예제 입니다.</p>    
            <div class="colorscripter-code" style="color:#010101;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; position:relative !important;overflow:auto"><table class="colorscripter-code-table" style="margin:0;padding:0;border:none;background-color:#fafafa;border-radius:4px;" cellspacing="0" cellpadding="0"><tr><td style="padding:6px;border-right:2px solid #e5e5e5"><div style="margin:0;padding:0;word-break:normal;text-align:right;color:#666;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important;line-height:130%"><div style="line-height:130%">1</div><div style="line-height:130%">2</div><div style="line-height:130%">3</div><div style="line-height:130%">4</div><div style="line-height:130%">5</div><div style="line-height:130%">6</div><div style="line-height:130%">7</div><div style="line-height:130%">8</div><div style="line-height:130%">9</div></div></td><td style="padding:6px 0;text-align:left"><div style="margin:0;padding:0;color:#010101;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important;line-height:130%"><div style="padding:0 6px; white-space:pre; line-height:130%">{</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;"client_id":&nbsp;"wbmytr93xzw8zbg0p1izqyzzc5mbiz",</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;"login":&nbsp;"twitchdev",</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;"scopes":&nbsp;[</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;"channel:read:subscriptions"</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;],</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;"user_id":&nbsp;"141981764",</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;"expires_in":&nbsp;5520838</div><div style="padding:0 6px; white-space:pre; line-height:130%">}</div></div><div style="text-align:right;margin-top:-13px;margin-right:5px;font-size:9px;font-style:italic"><a href="http://colorscripter.com/info#e" target="_blank">Colored by Color Scripter</a></div></td><td style="vertical-align:bottom;padding:0 2px 4px 0"><a href="http://colorscripter.com/info#e" target="_blank" style="text-decoration:none;color:white"><span style="font-size:9px;word-break:normal;background-color:#e5e5e5;color:white;border-radius:10px;padding:1px">cs</span></a></td></tr></table></div>
            <div class="sub_title" id="registration">어플리케이션 생성(Registration)</div>
        
        </div>

    </div>

    
</body>
</html>